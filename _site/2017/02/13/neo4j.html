<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="author" content="tzungtzu" />
    
    <title>neo4j å¸¸ç”¨å‘½ä»¤</title>
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/atom.xml" rel="alternate" title="setImpl" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/css/style.css">
    <link rel="stylesheet" href="/media/css/github.css">
<!--     <link rel="styesheet" href="/media/css/folder/popup.css"> -->
    <script type="text/javascript" src="/media/js/highlight.pack.js"></script>
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
    <script src="https://cdn1.lncld.net/static/js/av-mini-0.6.10.js"></script>
    <script src="http://jerry-cdn.b0.upaiyun.com/hit-kounter/hit-kounter-lc-0.2.0.js"></script>


  <!-- mathjax config similar to math.stackexchange -->  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
          }
        });
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

    <script type="text/javascript"
       src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
	  

  </head>
  <body>
<!--   <script src="/media/js/folder/jquery.popup.min.js"></script> -->
      <div id="main" role="main">
        <header>
          <div id="header">
            <h1><a title="zongwei" class="" href="/">TZUNGTZU</a></h1>
            <nav>
			  <span><a title="BLOG" class="" href="/blog/">BLOG</a></span>
              <span><a title="æ–‡ç« å½’æ¡£" class="" href="/archive.html">Archive</a></span>
			  <!-- 
              <span><a title="æ–‡ç« åˆ†ç±»" class="" href="/category.html">Category</a></span>
			   -->
              <span><a title="æ ‡ç­¾" class="" href="/tags.html">Tags</a></span>
              <span><a title="é“¾æ¥" class="" href="/links.html">Links</a></span>              
              <span><a title="ç›¸å†Œ" class="" href="https://www.instagram.com/tzungtzu/">Gallery</a></span>
              <span><a title="å…³äº" class="" href="/about.html">About</a></span>
              <span><a title="subscribe me" class="" href="/atom.xml">Feed</a></span>
              
            </nav>
          </div>
        </header>
		
		
        <div id="content">
        <article>
  <section class="title">
    <h2>neo4j å¸¸ç”¨å‘½ä»¤ </h2>
  </section>
  <section class="meta">
	<span class="time">
    <time datetime="2017-02-13">2017-02-13</time>
  </span>
  

<span class="categories">
	Published in categories
  
  <a href="/category.html#blog" title="blog">blog</a>&nbsp;
  
  <a href="/category.html#Technology" title="Technology">Technology</a>&nbsp;
  
</span>


  
  <span class="tags">
   tagged with 
    
    <a href="/tags.html#neo4j" title="neo4j">#neo4j</a>&nbsp;
    
    <a href="/tags.html#NoSQL" title="NoSQL">#NoSQL</a>&nbsp;
    
    <a href="/tags.html#Cypher" title="Cypher">#Cypher</a>&nbsp;
    
  </span>
  
  </section>
  <section class="post">
  <p>neo4j æ˜¯ä¸€ç§å›¾æ•°æ®åº“ï¼Œå›¾æ•°æ®åº“ç€é‡äºæ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œè€Œéæ•°æ®æœ¬èº«çš„ä¿¡æ¯ã€‚ä¸€ä¸ª RDBMS è¢«ä¼˜åŒ–ç”¨äºèšåˆæ•°æ®ã€‚è€Œ neo4j <strong>æ“…é•¿äºé«˜åº¦å…³è”çš„æ•°æ®</strong>ã€‚ ä¼˜ç‚¹æ˜¯æ’å…¥æŸ¥è¯¢æ–¹ä¾¿ï¼Œæœç´¢ä¾¿åˆ©æ–¹æ³•æ–¹ä¾¿ã€‚ç¼ºç‚¹æ˜¯è¶…å¤§èŠ‚ç‚¹çš„æ“ä½œæ…¢ã€‚
 <!--more--></p>

<h3 id="neo4j-æ¨¡å‹å»ºç«‹">neo4j æ¨¡å‹å»ºç«‹</h3>

<p>neo4j ä¸­çš„æ¦‚å¿µï¼š èŠ‚ç‚¹ï¼Œå…³ç³»ï¼Œå±æ€§ï¼Œæ ‡ç­¾ï¼ˆé’ˆå¯¹èŠ‚ç‚¹ï¼‰ï¼Œç±»å‹ï¼ˆé’ˆå¯¹å…³ç³»ï¼‰</p>

<p>å±æ€§ï¼šé‡è¦çš„æ•°æ®ç»“æ„ï¼Œä¸åŒäºå…³ç³»æ•°æ®åº“æ¨¡å‹çš„ç‰¹å¾ã€‚èŠ‚ç‚¹å’Œå…³ç³»å¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„å±æ€§ï¼Œé‡è¦çš„keyï¼value ã€‚</p>

<p>ç”¨æ ‡ç­¾å¯ä»¥æ‰©å±•å±æ€§ç»„ï¼Œç”¨äºå°†èŠ‚ç‚¹åˆ’åˆ†åˆ°ç‰¹å®šé›†åˆã€‚</p>

<p>æ¨¡å‹ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯æ˜¾å¼å’Œéšå¼ï¼ˆæ˜¯å¦ç›´æ¥ä½œä¸ºèŠ‚ç‚¹ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸å˜æˆ–è€…å¯å˜çš„ã€‚</p>

<h3 id="neo4j-å¼€å‘">neo4j å¼€å‘</h3>

<ol>
  <li>é€šè¿‡æ ¸å¿ƒ Java APIï¼ˆç³»ç»Ÿçº§ï¼‰</li>
  <li>é€šè¿‡æŸ¥è¯¢è¯­è¨€ Cypherï¼ˆæ˜“è¯»ï¼Œç»“æ„å¼ºå¤§ï¼‰
    <ol>
      <li>
        <p>æŸ¥æ‰¾èµ·å§‹èŠ‚ç‚¹<br />
 Â Â Â  START user = node(1)</p>
      </li>
      <li>
        <p>è·Ÿéšå…³ç³»éå†å›¾å½¢<br />
 Â Â Â  MATCH (user)-<a href="">r: HAS_SEEN</a>-(movie)</p>
      </li>
      <li>
        <p>è¿”å›æœ€ç»ˆèŠ‚ç‚¹ã€‚<br />
 Â Â Â  RETURN movie</p>
      </li>
    </ol>
  </li>
</ol>

<h3 id="cypher-åŸºæœ¬å¥æ³•">Â Cypher åŸºæœ¬å¥æ³•</h3>
<p>Â </p>
<ul>
  <li>start - æŸ¥æ‰¾å›¾å½¢ä¸­çš„èµ·å§‹èŠ‚ç‚¹</li>
  <li>match - åŒ¹é…å›¾å½¢æ¨¡å¼ï¼Œå¯ä»¥å®šä½å­å›¾å½¢</li>
  <li>where - åŸºäºæŸç§æ ‡å‡†è¿‡æ»¤æ•°æ®</li>
  <li>return - è¿”å›æ„Ÿå…´è¶£çš„ç»“æœ</li>
</ul>

<ol>
  <li>æ¨¡å¼åŒ¹é…</li>
  <li>èŠ‚ç‚¹å’Œå…³ç³»è¿æ¥</li>
  <li>ä¸¤ä¸ªå…³ç³»é“¾æ¥ä¸‰ä¸ªèŠ‚ç‚¹</li>
  <li>
    <p>å¤šä¸ªæ¨¡å¼åŒæ—¶åŒ¹é…</p>
  </li>
  <li>æŸ¥æ‰¾èŠ‚ç‚¹
    Â Â Â Â 
    <ul>
      <li>é€šè¿‡id</li>
      <li>é€šè¿‡INDEXÂ  START john = n: User(name: â€œâ€)</li>
      <li>æŸ¥è¯¢å¤šä¸ªèµ·å§‹èŠ‚ç‚¹Â  Â START john = n: User(name: â€œâ€)ï¼ŒÂ jack = n: User(name: â€œâ€)</li>
      <li>åˆ†é¡µç»“æœï¼š
 ORDERÂ  ç»“æœæ’åº
 SKIPÂ  è¿›è¡Œåˆ†é¡µ
 LIMITÂ  é™å®šè¾“å‡ºæ•°é‡</li>
    </ul>
  </li>
  <li>
    <p>è¿‡æ»¤æ•°æ®
 å¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤
 WHERE friend.mail = /@gmail.com/</p>
  </li>
  <li>è¿”å›ç»“æœ
 è¿”å›å±æ€§ï¼Œå…³ç³»ï¼Œè·¯å¾„ä»¥åŠåˆ†é¡µç»“æœ</li>
</ol>

<ul>
  <li>ORDER æ’åº</li>
  <li>SKIP è·³åˆ°æŒ‡å®šçš„é¡µ</li>
  <li>LIMIT é™åˆ¶è¾“å‡ºæ•°é‡</li>
</ul>

<ol>
  <li>æ›´æ–°èŠ‚ç‚¹æ•°æ®</li>
</ol>

<p>å»ºç«‹æ–°èŠ‚ç‚¹å’ŒæŸ¥æ‰¾å·²æœ‰èŠ‚ç‚¹
CREATEè¯­å¥ è®¾ç½®èŠ‚ç‚¹å¯¹åº”çš„å…³ç³»</p>

<p>CREATE<br />
    (<node1-label-name>:<node1-name>{<define-properties-list>})-
	[<relationship-label-name>:<relationship-name>{<define-properties-list>}]
	-&gt;(<node1-label-name>:<node1-name>{<define-properties-list>})
RETURN <relationship-label-name></relationship-label-name></define-properties-list></node1-name></node1-label-name></define-properties-list></relationship-name></relationship-label-name></define-properties-list></node1-name></node1-label-name></p>

<ol>
  <li>
    <p>åˆ é™¤æ•°æ®
DELETE æ³¨æ„é€‰æ‹©åˆ é™¤èŠ‚ç‚¹ï¼Œå…³ç³»</p>
  </li>
  <li>
    <p>æ›´æ–°èŠ‚ç‚¹å’Œå…³ç³»å±æ€§
SET john.yob = 1973</p>
  </li>
</ol>

<p>8.åˆ é™¤å±æ€§
start n= john
delete n.name</p>

<h3 id="é«˜çº§-cypher">é«˜çº§ Cypher</h3>

<ol>
  <li>æ•°æ®èšåˆ</li>
</ol>

<p>éèšåˆæ¡ç›®ï¼ˆèŠ‚ç‚¹ï¼‰ï¼Œèšåˆå‡½æ•°ï¼ˆCOUNTï¼‰</p>

<ol>
  <li>Cypherå‡½æ•°ï¼Œ
p = (n)-&gt;<a href="">r: IS_FRIEND_OF*1..3</a>-()</li>
</ol>

<p>NODES(path)</p>

<p>HAS(Entity.propertyName)</p>

<p>ALL(),Â  NONE(), SINGLE()</p>

<ol>
  <li>é“¾å¼æŸ¥è¯¢ä¸€ä¸ªæŸ¥è¯¢çš„è¾“å‡ºé“¾æ¥åˆ°å¦ä¸€ä¸ªæŸ¥è¯¢
MATCHÂ  n-<a href="">r</a>-()
with TYPE(r) as TYPE, count(*) AS COUNT
where COUNT &gt;1</li>
</ol>

<p>å‘½åwith è¯­å¥ä¸­çš„è¾“å‡ºå­—æ®µæ˜¯å¼ºåˆ¶æ€§çš„ã€‚</p>

<ul>
  <li>shortestpath</li>
  <li>allshortestpaths
 extract( x in collection | expression ) ä¾‹å¦‚ï¼š</li>
</ul>

<h3 id="å…¶ä»–">å…¶ä»–</h3>

<ol>
  <li>
    <p>ä» CSV æ–‡ä»¶å¯¼å…¥åˆ° Neo4j</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> LOAD CSV WITH HEADER FROM "url" AS row
 MERGE (src:Character {name: row.Source})
 MERGE (tgt:Character {name: row.Target})
 MERGE (src)-[r:INTERACTS]-&gt;(tgt)
 SET r.weight = toInt(row.Weight)
</code></pre></div>    </div>
  </li>
  <li>
    <p>ä¸€æ¬¡æ˜¾ç¤ºå¤šä¸ªç‚¹
     MATCH (n:uid) WHERE n.name IN [â€˜724972â€™,â€™704332â€™,â€™724747â€™] RETURN
\3.</p>
  </li>
</ol>

<h3 id="tips">Tips</h3>

<ol>
  <li>é¦–æ¬¡ç™»é™†å¿…é¡»ä¿®æ”¹å¯†ç ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨</li>
  <li>neo4j é»˜è®¤åªèƒ½ä»æœ¬æœºè®¿é—®ï¼Œå¦‚æœéœ€è¦ä»å¤–ç½‘è®¿é—®ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ã€‚</li>
  <li>ç½‘é¡µæ§åˆ¶å°ï¼ˆåŸºäºç½‘é¡µçš„æ¥å£ï¼‰</li>
  <li>æ·»åŠ  APOC æ—¶ï¼Œéœ€è¦å°†jaræ–‡ä»¶æ”¾åœ¨default.graphdbä¸‹çš„pluginsï¼Œé‡å¯å³å¯ã€‚</li>
  <li>æ­¥é•¿ä¸º2çš„è·¯å¾„ ()-[*2]-()</li>
  <li>match (a)-[*2]-&gt;(b) where a.name=â€˜Kaineâ€˜ and not (a)-[*1]-&gt;(b) return a,b</li>
  <li>()-[*..2]-()  æ­¥é•¿ä¸è¶…è¿‡2</li>
  <li>$match (n) where EXISTS(n.is_black) return n limit 5  æŸ¥çœ‹å±æ€§æ˜¯å¦å­˜åœ¨<a href=""></a></li>
</ol>

<p>MAXÂ Â DESC</p>

<p>æ–°å»ºä¸€ä¸ªnodeï¼ŒåŒ…æ‹¬å˜é‡åå’Œlabelï¼Œå¹¶æ·»åŠ å±æ€§ã€‚</p>

<h3 id="å¯ä»¥åšä»¥ä¸‹å°è¯•">å¯ä»¥åšä»¥ä¸‹å°è¯•ï¼š</h3>
<p>ä½¿ç”¨Matchå’Œå±æ€§æŸ¥æ‰¾ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>

<p>ä½¿ç”¨Matchå’Œå…³ç³»æŸ¥æ‰¾ç›¸å…³èŠ‚ç‚¹ã€‚</p>

<p>ä½¿ç”¨Matchè¿›è¡Œæ¨èã€‚</p>

<p>ä½¿ç”¨Matchå¯»æ‰¾æœ€å¤š4è·³ä»¥å†…çš„èŠ‚ç‚¹ã€‚</p>

<p>ä½¿ç”¨Matchå¯»æ‰¾ä¸¤èŠ‚ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„<a href="">ã€‚</a></p>

<p><a href="">https://github.com/linonetwo/neo4j-tutorial-Chinese/blob/master/Chapters/1.md</a></p>

<p><a href="http://www.infoq.com/cn/articles/graph-nosql-neo4j">http://www.infoq.com/cn/articles/graph-nosql-neo4j</a></p>

<h3 id="refrences">refrences:</h3>
<ol>
  <li>http://www.blogs8.cn/posts/AtIte8c</li>
  <li>http://neo4j.com/docs/developer-manual/current/cypher/syntax/patterns/</li>
</ol>


  </section>
  <section class="comment">
<div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'tzungtzu'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
       
         <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'tzungtzu'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        </script>
  </section> 
</article>

        </div>



		
        <footer>&copy; 2011 ~ 2017 â™¥ tzungtzu | powered by jekyll | themed by <a href="http://lhzhang.com" title="sext iv">sext iv</a> | ğŸ•¶ï¸ <span data-hk-page="current"> - </span> hits<span class="pause"> | </span>
        <div><span></span></div>
        </footer>
      </div> <!-- main -->
      
<!--       ç«™é•¿ç»Ÿè®¡cnzz -->
      <script src="https://s11.cnzz.com/z_stat.php?id=1260991989&web_id=1260991989" language="JavaScript"></script>
      <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260991989'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1260991989' type='text/javascript'%3E%3C/script%3E"));</script>
  </body>
</html>
