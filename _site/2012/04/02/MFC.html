<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="author" content="tzungtzu" />
    
    <title>MFCä¸­å†…å­˜DCç»˜å›¾çš„ç”»æ³•</title>
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/atom.xml" rel="alternate" title="setImpl" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/css/style.css">
    <link rel="stylesheet" href="/media/css/github.css">
<!--     <link rel="styesheet" href="/media/css/folder/popup.css"> -->
    <script type="text/javascript" src="/media/js/highlight.pack.js"></script>
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
    <script src="https://cdn1.lncld.net/static/js/av-mini-0.6.10.js"></script>
    <script src="http://jerry-cdn.b0.upaiyun.com/hit-kounter/hit-kounter-lc-0.2.0.js"></script>


  <!-- mathjax config similar to math.stackexchange -->  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
          }
        });
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

    <script type="text/javascript"
       src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
	  

  </head>
  <body>
<!--   <script src="/media/js/folder/jquery.popup.min.js"></script> -->
      <div id="main" role="main">
        <header>
          <div id="header">
            <h1><a title="zongwei" class="" href="/">TZUNGTZU</a></h1>
            <nav>
			  <span><a title="BLOG" class="" href="/blog/">BLOG</a></span>
              <span><a title="æ–‡ç« å½’æ¡£" class="" href="/archive.html">Archive</a></span>
			  <!-- 
              <span><a title="æ–‡ç« åˆ†ç±»" class="" href="/category.html">Category</a></span>
			   -->
              <span><a title="æ ‡ç­¾" class="" href="/tags.html">Tags</a></span>
              <span><a title="é“¾æ¥" class="" href="/links.html">Links</a></span>              
              <span><a title="ç›¸å†Œ" class="" href="https://www.instagram.com/tzungtzu/">Gallery</a></span>
              <span><a title="å…³äº" class="" href="/about.html">About</a></span>
              <span><a title="subscribe me" class="" href="/atom.xml">Feed</a></span>
              
            </nav>
          </div>
        </header>
		
		
        <div id="content">
        <article>
  <section class="title">
    <h2>MFCä¸­å†…å­˜DCç»˜å›¾çš„ç”»æ³• </h2>
  </section>
  <section class="meta">
	<span class="time">
    <time datetime="2012-04-02">2012-04-02</time>
  </span>
  

<span class="categories">
	Published in categories
  
  <a href="/category.html#blog" title="blog">blog</a>&nbsp;
  
  <a href="/category.html#Research" title="Research">Research</a>&nbsp;
  
</span>


  
  <span class="tags">
   tagged with 
    
    <a href="/tags.html#æ¯•ä¸šè®¾è®¡" title="æ¯•ä¸šè®¾è®¡">#æ¯•ä¸šè®¾è®¡</a>&nbsp;
    
    <a href="/tags.html#MFC" title="MFC">#MFC</a>&nbsp;
    
    <a href="/tags.html#C++" title="C++">#C++</a>&nbsp;
    
    <a href="/tags.html#å†…å­˜DCç»˜å›¾" title="å†…å­˜DCç»˜å›¾">#å†…å­˜DCç»˜å›¾</a>&nbsp;
    
  </span>
  
  </section>
  <section class="post">
  <p>æ˜¨æ™šç»ˆäºæŠŠå®éªŒå¹³å°æˆ‘çš„éƒ¨åˆ†åˆæ­¥å®Œæˆäº†ï¼Œä¸»è¦å†…å®¹æ˜¯USRPæ„ŸçŸ¥ç¯å¢ƒé¢‘è°±æ•°æ®(linuxç¯å¢ƒ)é€šè¿‡afxsocketä¼ ç»™windowsä¸‹æœåŠ¡å™¨ã€‚æœ¬ä»¥ä¸ºè§£å†³ä»pythonçš„stringåˆ°VCçš„Cstringè½¬æ¢å’Œæ•°æ®åŒ…è§£æé—®é¢˜å°±è¡Œäº†ã€‚ä½†å®é™…å®Œæˆæ—¶åœ¨å®æ—¶æ›´æ–°ç»˜å›¾æ•°æ®å¡äº†ä¸€ä¸‹ã€‚åºŸè¯å°‘è¯´ï¼Œç°åœ¨è¯´ä¸‹é—®é¢˜éœ€æ±‚å’Œè§£å†³åŠæ³•ã€‚</p>

<p>éœ€æ±‚ï¼šserveræ¥æ”¶åˆ°æ•°æ®åŒ…ï¼Œå°†éœ€è¦çš„é¢‘è°±ä¿¡æ¯è½¬åˆ°æ•´å½¢æ•°ç»„array[16]ï¼Œç”±äºå®æ—¶æ€§éœ€æ±‚array[16]äº”ç§’æ›´æ–°ä¸€æ¬¡ï¼Œè¦ä¿è¯ç”»çš„é¢‘è°±æŠ˜çº¿å›¾èƒ½å¤Ÿæ˜¾ç¤ºæ›´æ–°ã€‚</p>

<p>é—®é¢˜ï¼šæœ€åˆé‡‡ç”¨OnPaintå‡½æ•°ç»˜å›¾ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä½“åŠ›æ´»ï¼Œä»åæ ‡è½´åˆ°ç½‘æ ¼æ¯ä¸€ç¬”éƒ½è¦å†™ä¸‹æ¥ã€‚åœ¨åˆ·æ–°æ•°æ®çš„æ—¶å€™å‡ºç°é—®é¢˜ï¼Œä½¿ç”¨é‡ç»˜å‡½æ•°åˆ·æ–°æ— æ³•ç”¨è®¡æ—¶å™¨æ§åˆ¶ã€‚éœ€è¦è·Ÿå®¢æˆ·ç«¯å‘é€çš„é¢‘è°±ä¸€æ ·ã€‚</p>

<p>é‡‡ç”¨å†…å­˜DCç»˜å›¾ç›¸å½“äºåˆ›å»ºä¸€ä¸ªå†…å­˜DC,å°†å›¾å½¢å…ˆç»˜åˆ¶åˆ°è¿™ä¸ªDCä¸Šé¢,ä¹‹åé€šè¿‡BitBltè¿™ä¸ªå‡½æ•°é€šè¿‡ä½æ‹·è´çš„æ–¹å¼å°†å†…å­˜DCçš„æ•°æ®æ‹·è´åˆ°å›¾å½¢è®¾å¤‡ä¸Šå»,ç”±äºå†…å­˜æ‹·è´çš„é€Ÿåº¦å¾ˆå¿«,æ‰€ä»¥æˆ‘ä»¬å¾ˆå¤§ç¨‹åº¦æ”¹è¿›äº†ç»˜å›¾æ•ˆç‡(è¿™ç§æŠ€æœ¯å«åšåŒç¼“å†²)ã€‚</p>

<p>å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ol>
  <li>åœ¨å¯¹è¯æ¡†æ·»åŠ ä¸€ä¸ªpicture controlæ§ä»¶ï¼Œè®¾ç½®IDä¸ºIDC_COORDï¼Œç§»åŠ¨åˆ°åˆé€‚ä½ç½®ã€‚</li>
</ol>

<p>åœ¨é¡¹ç›®çš„ç±»ä¸­æ·»åŠ å¦‚ä¸‹å˜é‡ï¼š</p>

<p>CRect rect;                  // å­˜å‚¨ç»˜å›¾æ§ä»¶çš„ç»˜å›¾åŒºåŸŸ
CDC *pDC;                  // æ§ä»¶çš„å±å¹•ç»˜å›¾è®¾å¤‡æŒ‡é’ˆ
CDC memDC;              // å†…å­˜ç»˜å›¾è®¾å¤‡
CBitmap memBitmap;  // ç”¨äºå†…å­˜ç»˜å›¾çš„ä½å›¾
CBitmap* pOldBmp;    // å¤‡ä»½æ—§çš„ä½å›¾æŒ‡é’ˆ
CWnd* pWnd;             // ç»˜å›¾æ§ä»¶çš„æŒ‡é’ˆ</p>

<ol>
  <li>ç”¨ClassWizardåœ¨é¡¹ç›®ä¸­æ·»åŠ OnInitDialog()æ¶ˆæ¯å“åº”å‡½æ•°ï¼Œå®ç°ç»˜å›¾éœ€è¦å˜é‡çš„åˆå§‹åŒ–å·¥ä½œï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</li>
</ol>

<p>pWnd = GetDlgItem(IDC_COORD); // è·å¾—å¯¹è¯æ¡†ä¸Šçš„pictureçš„çª—å£å¥æŸ„
pWnd-&gt;GetClientRect(&amp;rect);         // è·å–ç»˜åˆ¶åæ ‡çš„æ–‡æœ¬æ¡†</p>

<p>pDC = pWnd-&gt;GetDC();                 // è·å¾—å¯¹è¯æ¡†ä¸Šçš„pictureçš„è®¾å¤‡æŒ‡é’ˆ
pOldBmp = NULL;                           // å°†æ—§çš„ä½å›¾æŒ‡é’ˆç½®ç©º</p>

<p>Drawwaveï¼ˆ&amp;memï¼‰                 // åˆ›å»ºå†…å­˜ç»˜å›¾è®¾å¤‡ï¼Œä½¿å†…å­˜ä½å›¾çš„DCä¸æ§ä»¶çš„DCå…³è”
memDC.CreateCompatibleDC(pDC);
memBitmap.CreateCompatibleBitmap(pDC,rect.right,rect.bottom);
pOldBmp = memDC.SelectObject(&amp;memBitmap);</p>

<p>ç¬¬ä¸‰æ­¥ï¼šåœ¨Dlgç±»ä¸­æ·»åŠ ç»˜å›¾å‡½æ•°ã€‚</p>

<p>void CXv001Dlg::DrawWave(CDC *pDC)
{</p>

<p>memDC.Rectangle(rect.left,rect.top,rect.right,rect.bottom);
/*</p>

<p>æ­¤å¤„å¯ä»¥å†™ä½ è¦ç”»çš„å›¾ï¼Œå¯ä»¥é…ä¸Šåæ ‡ã€‚</p>

<p>*/</p>

<p>}</p>

<ol>
  <li>åœ¨Dlgç±»ä¸­æ·»åŠ OnTimer(),OnPaint()å’ŒOnCloseçš„æ¶ˆæ¯å“åº”å‡½æ•°ã€‚</li>
</ol>

<p>åœ¨OnInitDialog()å‡½æ•°æ€»æ·»åŠ å¦‚ä¸‹ä»£ç </p>

<p>SetTimer(1,10,NULL);          // å¯åŠ¨å®šæ—¶å™¨</p>

<p>åœ¨OnTimer()å‡½æ•°ä¸­æ·»åŠ </p>

<p>DrawWave(&amp;memDC);         // åœ¨ä½å›¾ä¸­ç”»å›¾ç‰‡
OnPaint();                                 // ä½¿å±å¹•åˆ·æ–°</p>

<p>åœ¨OnPaint()å‡½æ•°ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå®ç°å°†ç”Ÿæˆçš„å›¾ç‰‡æ‹·è´åˆ°å±å¹•ä¸Šï¼Œå®Œæˆæ•´ä¸ªç»˜å›¾çš„å·¥ä½œã€‚</p>

<p>pDC-&gt;BitBlt(rect.left,rect.top,rect.right,rect.bottom,&amp;memDC,0,0,SRCCOPY);</p>

<p>æœ€åï¼šåœ¨OnClose()å‡½æ•°ä¸­ï¼Œåˆ«å¿˜äº†é”€æ¯ç»˜å›¾åŠä½å›¾è®¾å¤‡çš„æŒ‡é’ˆã€‚</p>

<p>memDC.SelectObject(pOldBmp);
memDC.DeleteDC();
memBitmap.DeleteObject();</p>

<p>æˆ‘çš„æ•ˆæœå›¾å¦‚ä¸‹ï¼š
[å›¾]</p>

<h6 id="æˆ‘æ˜¯æ— èŠçš„åˆ†ç•Œçº¿">#æˆ‘æ˜¯æ— èŠçš„åˆ†ç•Œçº¿</h6>

<p>è™½ç„¶æ„Ÿè§‰ç•Œé¢å¯’ç¢œäº†ç‚¹ï¼Œä½†æ˜¯å°±å‡†å¤‡æ‹¿å®ƒåšæˆ‘æ¯•è®¾çš„ç•Œé¢äº†ã€‚å‰©ä¸‹çš„å°±æ˜¯ç®—æ³•é—®é¢˜äº†~ å¿«ç‚¹å†™å®Œæ—…æ¸¸å»= =</p>

  </section>
  <section class="comment">
<div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'tzungtzu'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
       
         <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'tzungtzu'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        </script>
  </section> 
</article>

        </div>



		
        <footer>&copy; 2011 ~ 2017 â™¥ tzungtzu | powered by jekyll | themed by <a href="http://lhzhang.com" title="sext iv">sext iv</a> | ğŸ•¶ï¸ <span data-hk-page="current"> - </span> hits<span class="pause"> | </span>
        <div><span></span></div>
        </footer>
      </div> <!-- main -->
      
<!--       ç«™é•¿ç»Ÿè®¡cnzz -->
      <script src="https://s11.cnzz.com/z_stat.php?id=1260991989&web_id=1260991989" language="JavaScript"></script>
      <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260991989'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1260991989' type='text/javascript'%3E%3C/script%3E"));</script>
  </body>
</html>
